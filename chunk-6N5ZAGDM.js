import{a as B}from"./chunk-NYBPJFV5.js";import{a as K}from"./chunk-B3MOF5O5.js";import{a as T,b as $}from"./chunk-NDZ4MHAP.js";import{b as V,f as N,g as D,h as G,j as H,l as L,n as R,o as q,q as A}from"./chunk-KOPSYT4H.js";import"./chunk-FQBKUNLG.js";import{i as k}from"./chunk-5RXE7P7J.js";import{$a as s,$b as I,Fb as p,Hb as E,Ib as F,Jb as n,Kb as o,Lb as h,Mb as v,Ob as _,Pb as c,_b as a,ac as b,ba as S,ia as x,ja as C,nb as g,nc as u,oc as f,sb as m,z as y,zb as w}from"./chunk-EIIQHZ4O.js";import"./chunk-ESJYUATY.js";function M(e,i){if(e&1){let t=v();n(0,"li",7),_("click",function(){let l=x(t).$implicit,d=c();return C(d.fromHistory(l.id))}),a(1),o()}if(e&2){let t=i.$implicit;s(),b(" ",t.title," ")}}function P(e,i){e&1&&(n(0,"div"),h(1,"app-spinner",8),n(2,"div",9),a(3,"Load spreadsheet"),o()())}function z(e,i){if(e&1&&m(0,P,4,0,"div"),e&2){let t=c(2);p(t.hasRequested?0:-1)}}function j(e,i){e&1&&(n(0,"div",11)(1,"div",14),a(2,"Contains valuables!"),o(),n(3,"div",15),a(4,"Valuables are Pok\xE9mon with a certain rarity. Event, shiny, competitive, legendary Pok\xE9mon and others. "),o()())}function J(e,i){e&1&&(n(0,"div",11)(1,"div",14),a(2,"Contains breedables!"),o(),n(3,"div",15),a(4,"Breedables are Pok\xE9mon, which can be bred or are a result of breeding. They are usually collected in different kind of balls like Bulbasaur in a Friend Ball. "),o()())}function O(e,i){if(e&1){let t=v();n(0,"div",2),a(1),o(),h(2,"div",10),m(3,j,5,0,"div",11)(4,J,5,0,"div",11),n(5,"div",12)(6,"button",13),_("click",function(){x(t);let l=c(),d=c(3);return C(d.saveSpreadsheet(l))}),a(7,"Save as current spreadsheet "),o()()}if(e&2){let t=c();s(),I(t.title),s(2),p(t.hasValuables?3:-1),s(),p(t.hasBreedables?4:-1)}}function Q(e,i){e&1&&m(0,O,8,3),e&2&&p(i?0:-1)}function U(e,i){if(e&1&&(m(0,Q,1,1),u(1,"async")),e&2){let t,r=c(2);p((t=f(1,1,r.loadedSpreadsheet$))?0:-1,t)}}function W(e,i){if(e&1&&a(0),e&2){let t=c(2);b(" Error: ",t.error==null?null:t.error.message," ")}}function X(e,i){if(e&1&&(m(0,z,1,1),u(1,"async"),m(2,U,2,3)(3,W,1,1)),e&2){let t=c();p(f(1,2,t.isLoading$)?0:-1),s(2),p(t.error?3:2)}}function Y(e,i){e&1&&(n(0,"app-ball-guy-bubble")(1,"div"),a(2,"Enter a spreadsheet ID to load a spreadsheet."),o(),n(3,"div"),a(4,"Make sure the spreadsheet with that given ID is published to web and made from the template!"),o(),n(5,"div"),a(6,"Currently no other spreadsheet template it supported."),o()())}var me=(()=>{let i=class i{constructor(){this.spreadsheetFacade=S($),this.hasRequested=!1,this.apiKey=T.googleApiKey,this.error=null,this.searchForm=new G({search:new H("",{nonNullable:!0})}),this.isLoading$=this.spreadsheetFacade.isLoading$(),this.spreadsheetHistory$=this.spreadsheetFacade.getSpreadsheetHistory$()}submitSearch(){this.hasRequested=!0,this.error=null,this.loadedSpreadsheet$=this.spreadsheetFacade.searchSpreadsheet(this.searchForm.controls.search.value,this.apiKey).pipe(y((r,l)=>(this.error=r,l)))}saveSpreadsheet(r){this.spreadsheetFacade.updateCurrentSpreadsheet(r)}fromHistory(r){this.hasRequested=!0,this.loadedSpreadsheet$=this.spreadsheetFacade.loadSpreadsheet(r,this.apiKey)}trackBy(r,l){return l.id}};i.\u0275fac=function(l){return new(l||i)},i.\u0275cmp=g({type:i,selectors:[["app-index"]],hostAttrs:[1,"view","spreadsheet-changer-view"],decls:16,vars:4,consts:[[1,"view-header","full-width"],[1,"view-sidebar"],[1,"view-subheader"],[3,"submit","formGroup"],["formControlName","search","id","search","placeholder","Look up spreadsheet by id"],[1,"history-entry"],[1,"view-content"],[1,"history-entry",3,"click"],[1,"centered-spinner"],[1,"t-align-center"],[1,""],[1,"collection-infos"],[1,"button-row"],[1,"save-button",3,"click"],[1,"title"],[1,"text"]],template:function(l,d){l&1&&(n(0,"header",0),a(1,"Change spreadsheet"),o(),n(2,"aside",1)(3,"div",2),a(4,"Spreadsheet search"),o(),n(5,"form",3),_("submit",function(){return d.submitSearch()}),h(6,"input",4),o(),n(7,"div",2),a(8," search history "),o(),n(9,"ul"),E(10,M,2,1,"li",5,d.trackBy,!0),u(12,"async"),o()(),n(13,"div",6),m(14,X,4,4)(15,Y,7,0,"app-ball-guy-bubble"),o()),l&2&&(s(5),w("formGroup",d.searchForm),s(5),F(f(12,2,d.spreadsheetHistory$)),s(4),p(d.loadedSpreadsheet$?14:15))},dependencies:[A,L,V,N,D,R,q,k,B,K],styles:[`#search,.history-entry,.save-button{font-size:90%;font-weight:500;line-height:32px;color:#000;border-radius:42px;box-shadow:0 3px 5px #0006;align-items:center;width:100%;overflow:hidden;border:none;outline:none;padding:0 8px;background:#fff}.history-entry{cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:16px}.save-button{cursor:pointer;width:auto}.spreadsheet-changer-view .centered-spinner{margin:20px auto}.collection-infos{margin-top:16px}.collection-infos .title{font-size:18px}.collection-infos .text{margin:0 0 8px;line-height:1.4;color:#000000e6}@media (prefers-color-scheme: dark){#search,.history-entry,.save-button{background:#21262d;color:#efe2e3}.collection-infos .title{color:#efe2e3}.collection-infos .text{color:#ffffffb3}}@media screen and (max-width: 720px){.spreadsheet-changer-view .view-sidebar{order:2}}
`],encapsulation:2});let e=i;return e})();export{me as IndexComponent};
