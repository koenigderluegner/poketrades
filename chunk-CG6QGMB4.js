import{a as B}from"./chunk-ALTY4R7Z.js";import{a as O}from"./chunk-4ODGWJGT.js";import{b as $}from"./chunk-RJLBCVZJ.js";import{b as N,f as R,g as D,h as H,j as q,k as L,n as P,o as A}from"./chunk-RAJMQWYD.js";import"./chunk-XIAJCPMG.js";import"./chunk-6XO6RWXE.js";import{Ab as h,Cb as w,Db as E,Eb as I,Fb as n,Gb as o,Hb as f,Lb as x,Nb as C,Pb as l,Ua as c,aa as b,bc as r,cc as T,dc as v,eb as y,fa as u,ga as _,hc as V,ic as k,jc as F,pc as M,qa as S,zb as p,zc as g}from"./chunk-XTNE3QCR.js";import"./chunk-2QKSPLSF.js";var W=()=>({name:"search",updateOn:"submit"}),z=(e,t)=>t.id;function G(e,t){if(e&1){let i=x();n(0,"li",6),C("click",function(){let s=u(i).$implicit,d=l();return _(d.fromHistory(s.id))}),r(1),o()}if(e&2){let i=t.$implicit;c(),v(" ",i.title," ")}}function j(e,t){e&1&&(n(0,"div"),f(1,"app-spinner",7),n(2,"div",8),r(3,"Load spreadsheet"),o()())}function J(e,t){if(e&1&&p(0,j,4,0,"div"),e&2){let i=l(2);h(i.hasRequested?0:-1)}}function K(e,t){e&1&&(n(0,"div",10)(1,"div",13),r(2,"Contains valuables!"),o(),n(3,"div",14),r(4,"Valuables are Pok\xE9mon with a certain rarity. Event, shiny, competitive, legendary Pok\xE9mon and others. "),o()())}function Q(e,t){e&1&&(n(0,"div",10)(1,"div",13),r(2,"Contains breedables!"),o(),n(3,"div",14),r(4,"Breedables are Pok\xE9mon, which can be bred or are a result of breeding. They are usually collected in different kind of balls like Bulbasaur in a Friend Ball. "),o()())}function U(e,t){if(e&1){let i=x();n(0,"div",2),r(1),o(),f(2,"div",9),p(3,K,5,0,"div",10),p(4,Q,5,0,"div",10),n(5,"div",11)(6,"button",12),C("click",function(){u(i);let s=l(),d=l(3);return _(d.saveSpreadsheet(s))}),r(7,"Save as current spreadsheet "),o()()}if(e&2){let i=l();c(),T(i.title),c(2),h(i.hasValuables?3:-1),c(),h(i.hasBreedables?4:-1)}}function X(e,t){e&1&&p(0,U,8,3),e&2&&h(t?0:-1)}function Y(e,t){if(e&1&&p(0,X,1,1),e&2){let i,a=l(2);h((i=a.loadedSpreadsheet$.value())?0:-1,i)}}function Z(e,t){if(e&1&&r(0),e&2){let i=l(2);v(" Error: ",i.error==null?null:i.error.message," ")}}function ee(e,t){if(e&1&&p(0,J,1,1)(1,Y,1,1)(2,Z,1,1),e&2){let i=l();h(i.loadedSpreadsheet$.isLoading()||!i.loadedSpreadsheet$.status()?0:i.loadedSpreadsheet$.hasValue()?1:2)}}function te(e,t){e&1&&(n(0,"app-ball-guy-bubble")(1,"div"),r(2,"Enter a spreadsheet ID to load a spreadsheet."),o(),n(3,"div"),r(4,"Make sure the spreadsheet with that given ID is published to web and made from the template!"),o(),n(5,"div"),r(6,"Currently no other spreadsheet template it supported."),o()())}var he=(()=>{let t=class t{constructor(){this.searchValue=S(""),this.hasRequested=!1,this.error=null,this.spreadsheetFacade=b($),this.loadedSpreadsheet$=this.spreadsheetFacade.searchResult,this.spreadsheetHistory$=this.spreadsheetFacade.getSpreadsheetHistory$(),g(()=>{let a=this.spreadsheetFacade.searchResult.error();a&&"status"in a&&typeof a.status=="number"&&(this.error=this.spreadsheetFacade.convertApiErrors(a.status))}),g(()=>{this.searchValue().length&&this.submitSearch(this.searchValue)})}submitSearch(a){this.hasRequested=!0,this.spreadsheetFacade.currentSearchTerm.set(a())}saveSpreadsheet(a){this.spreadsheetFacade.updateCurrentSpreadsheet(a)}fromHistory(a){this.hasRequested=!0,this.spreadsheetFacade.currentSearchTerm.set(a)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=y({type:t,selectors:[["app-index"]],hostAttrs:[1,"view","spreadsheet-changer-view"],decls:15,vars:4,consts:[[1,"view-header","full-width"],[1,"view-sidebar"],[1,"view-subheader"],["id","search","placeholder","Look up spreadsheet by id",3,"ngModelChange","ngModel","ngModelOptions"],[1,"history-entry"],[1,"view-content"],[1,"history-entry",3,"click"],[1,"centered-spinner"],[1,"t-align-center"],[1,""],[1,"collection-infos"],[1,"button-row"],[1,"save-button",3,"click"],[1,"title"],[1,"text"]],template:function(s,d){s&1&&(n(0,"header",0),r(1,"Change spreadsheet"),o(),n(2,"aside",1)(3,"div",2),r(4,"Spreadsheet search"),o(),n(5,"form")(6,"input",3),F("ngModelChange",function(m){return k(d.searchValue,m)||(d.searchValue=m),m}),o()(),n(7,"div",2),r(8," search history "),o(),n(9,"ul"),w(10,G,2,1,"li",4,z),o()(),n(12,"div",5),p(13,ee,3,1)(14,te,7,0,"app-ball-guy-bubble"),o()),s&2&&(c(6),V("ngModel",d.searchValue),I("ngModelOptions",M(3,W)),c(4),E(d.spreadsheetHistory$()),c(3),h(d.loadedSpreadsheet$?13:14))},dependencies:[A,L,N,R,D,B,O,P,q,H],styles:[`#search,.history-entry,.save-button{font-size:90%;font-weight:500;line-height:32px;color:#000;border-radius:42px;box-shadow:0 3px 5px #0006;align-items:center;width:100%;overflow:hidden;border:none;outline:none;padding:0 8px;background:#fff}.history-entry{cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:16px}.save-button{cursor:pointer;width:auto}.spreadsheet-changer-view .centered-spinner{margin:20px auto}.collection-infos{margin-top:16px}.collection-infos .title{font-size:18px}.collection-infos .text{margin:0 0 8px;line-height:1.4;color:#000000e6}@media (prefers-color-scheme: dark){#search,.history-entry,.save-button{background:#21262d;color:#efe2e3}.collection-infos .title{color:#efe2e3}.collection-infos .text{color:#ffffffb3}}@media screen and (max-width: 720px){.spreadsheet-changer-view .view-sidebar{order:2}}
`],encapsulation:2});let e=t;return e})();export{he as IndexComponent};
