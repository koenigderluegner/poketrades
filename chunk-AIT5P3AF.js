import{a as B}from"./chunk-5FZC2JNE.js";import{a as O}from"./chunk-EEO4W3YG.js";import{b as $}from"./chunk-M6UPZNFC.js";import{b as R,f as N,g as D,h as H,j as q,k as L,n as P,o as A}from"./chunk-TENYMHVM.js";import"./chunk-7YUFRYV5.js";import"./chunk-MC2DVP3H.js";import{$b as V,Ab as I,Bb as i,Cb as n,Db as f,Eb as x,Gb as C,Hb as d,Ta as s,Vb as o,Wb as T,Xb as v,aa as g,ac as k,bc as F,db as y,fa as u,ga as _,hc as M,pa as S,rc as b,vb as c,wb as p,yb as w,zb as E}from"./chunk-HDOEFQUA.js";import"./chunk-4CLCTAJ7.js";var W=()=>({name:"search",updateOn:"submit"}),z=(e,a)=>a.id;function G(e,a){if(e&1){let t=x();i(0,"li",6),C("click",function(){let r=u(t).$implicit,h=d();return _(h.fromHistory(r.id))}),o(1),n()}if(e&2){let t=a.$implicit;s(),v(" ",t.title," ")}}function j(e,a){e&1&&(i(0,"div"),f(1,"app-spinner",7),i(2,"div",8),o(3,"Load spreadsheet"),n()())}function J(e,a){if(e&1&&c(0,j,4,0,"div"),e&2){let t=d(2);p(t.hasRequested?0:-1)}}function K(e,a){e&1&&(i(0,"div",10)(1,"div",13),o(2,"Contains valuables!"),n(),i(3,"div",14),o(4,"Valuables are Pok\xE9mon with a certain rarity. Event, shiny, competitive, legendary Pok\xE9mon and others. "),n()())}function Q(e,a){e&1&&(i(0,"div",10)(1,"div",13),o(2,"Contains breedables!"),n(),i(3,"div",14),o(4,"Breedables are Pok\xE9mon, which can be bred or are a result of breeding. They are usually collected in different kind of balls like Bulbasaur in a Friend Ball. "),n()())}function U(e,a){if(e&1){let t=x();i(0,"div",2),o(1),n(),f(2,"div",9),c(3,K,5,0,"div",10),c(4,Q,5,0,"div",10),i(5,"div",11)(6,"button",12),C("click",function(){u(t);let r=d(),h=d(3);return _(h.saveSpreadsheet(r))}),o(7,"Save as current spreadsheet "),n()()}if(e&2){let t=d();s(),T(t.title),s(2),p(t.hasValuables?3:-1),s(),p(t.hasBreedables?4:-1)}}function X(e,a){e&1&&c(0,U,8,3),e&2&&p(a?0:-1)}function Y(e,a){if(e&1&&c(0,X,1,1),e&2){let t,l=d(2);p((t=l.loadedSpreadsheet$.value())?0:-1,t)}}function Z(e,a){if(e&1&&o(0),e&2){let t=d(2);v(" Error: ",t.error==null?null:t.error.message," ")}}function ee(e,a){if(e&1&&c(0,J,1,1)(1,Y,1,1)(2,Z,1,1),e&2){let t=d();p(t.loadedSpreadsheet$.isLoading()||!t.loadedSpreadsheet$.status()?0:t.loadedSpreadsheet$.hasValue()?1:2)}}function te(e,a){e&1&&(i(0,"app-ball-guy-bubble")(1,"div"),o(2,"Enter a spreadsheet ID to load a spreadsheet."),n(),i(3,"div"),o(4,"Make sure the spreadsheet with that given ID is published to web and made from the template!"),n(),i(5,"div"),o(6,"Currently no other spreadsheet template it supported."),n()())}var pe=(()=>{class e{constructor(){this.searchValue=S(""),this.hasRequested=!1,this.error=null,this.spreadsheetFacade=g($),this.loadedSpreadsheet$=this.spreadsheetFacade.searchResult,this.spreadsheetHistory$=this.spreadsheetFacade.getSpreadsheetHistory$(),b(()=>{let t=this.spreadsheetFacade.searchResult.error();t&&"status"in t&&typeof t.status=="number"&&(this.error=this.spreadsheetFacade.convertApiErrors(t.status))}),b(()=>{this.searchValue().length&&this.submitSearch(this.searchValue)})}submitSearch(t){this.hasRequested=!0,this.spreadsheetFacade.currentSearchTerm.set(t())}saveSpreadsheet(t){this.spreadsheetFacade.updateCurrentSpreadsheet(t)}fromHistory(t){this.hasRequested=!0,this.spreadsheetFacade.currentSearchTerm.set(t)}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=y({type:e,selectors:[["app-index"]],hostAttrs:[1,"view","spreadsheet-changer-view"],decls:15,vars:4,consts:[[1,"view-header","full-width"],[1,"view-sidebar"],[1,"view-subheader"],["id","search","placeholder","Look up spreadsheet by id",3,"ngModelChange","ngModel","ngModelOptions"],[1,"history-entry"],[1,"view-content"],[1,"history-entry",3,"click"],[1,"centered-spinner"],[1,"t-align-center"],[1,""],[1,"collection-infos"],[1,"button-row"],[1,"save-button",3,"click"],[1,"title"],[1,"text"]],template:function(l,r){l&1&&(i(0,"header",0),o(1,"Change spreadsheet"),n(),i(2,"aside",1)(3,"div",2),o(4,"Spreadsheet search"),n(),i(5,"form")(6,"input",3),F("ngModelChange",function(m){return k(r.searchValue,m)||(r.searchValue=m),m}),n()(),i(7,"div",2),o(8," search history "),n(),i(9,"ul"),w(10,G,2,1,"li",4,z),n()(),i(12,"div",5),c(13,ee,3,1)(14,te,7,0,"app-ball-guy-bubble"),n()),l&2&&(s(6),V("ngModel",r.searchValue),I("ngModelOptions",M(3,W)),s(4),E(r.spreadsheetHistory$()),s(3),p(r.loadedSpreadsheet$?13:14))},dependencies:[A,L,R,N,D,B,O,P,q,H],styles:[`#search,.history-entry,.save-button{font-size:90%;font-weight:500;line-height:32px;color:#000;border-radius:42px;box-shadow:0 3px 5px #0006;align-items:center;width:100%;overflow:hidden;border:none;outline:none;padding:0 8px;background:#fff}.history-entry{cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:16px}.save-button{cursor:pointer;width:auto}.spreadsheet-changer-view .centered-spinner{margin:20px auto}.collection-infos{margin-top:16px}.collection-infos .title{font-size:18px}.collection-infos .text{margin:0 0 8px;line-height:1.4;color:#000000e6}@media (prefers-color-scheme: dark){#search,.history-entry,.save-button{background:#21262d;color:#efe2e3}.collection-infos .title{color:#efe2e3}.collection-infos .text{color:#ffffffb3}}@media screen and (max-width: 720px){.spreadsheet-changer-view .view-sidebar{order:2}}
`],encapsulation:2})}}return e})();export{pe as IndexComponent};
