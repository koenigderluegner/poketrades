"use strict";(self.webpackChunkpoketrades=self.webpackChunkpoketrades||[]).push([[288],{8288:(Q,h,r)=>{r.r(h),r.d(h,{SpreadsheetChangerModule:()=>a});var l=r(6895),g=r(9132),i=r(4006),_=r(8505),f=r(2340),m=r(262),e=r(4650),x=r(6276),v=r(8059),y=r(2925);function Z(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){const p=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.fromHistory(p.id))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function I(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-spinner",12),e.TgZ(2,"div",13),e._uU(3,"Load spreadsheet"),e.qZA()())}function T(n,o){if(1&n&&(e.ynx(0),e.YNc(1,I,4,0,"div",11),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.hasRequested)}}function b(n,o){1&n&&(e.TgZ(0,"div",18)(1,"div",19),e._uU(2,"Contains valuables!"),e.qZA(),e.TgZ(3,"div",20),e._uU(4,"Valuables are Pok\xe9mon with a certain rarity. Event, shiny, competitive, legendary Pok\xe9mon and others. "),e.qZA()())}function C(n,o){1&n&&(e.TgZ(0,"div",18)(1,"div",19),e._uU(2,"Contains breedables!"),e.qZA(),e.TgZ(3,"div",20),e._uU(4,"Breedables are Pok\xe9mon, which can be bred or are a result of breeding. They are usually collected in different kind of balls like Bulbasaur in a Friend Ball. "),e.qZA()())}function w(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e._UZ(3,"div",14),e.YNc(4,b,5,0,"div",15),e.YNc(5,C,5,0,"div",15),e.TgZ(6,"div",16)(7,"button",17),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().ngIf,p=e.oxw(3);return e.KtG(p.saveSpreadsheet(u))}),e._uU(8,"Save as current spreadsheet "),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw().ngIf;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Q6J("ngIf",t.hasValuables),e.xp6(1),e.Q6J("ngIf",t.hasBreedables)}}function A(n,o){if(1&n&&(e.ynx(0),e.YNc(1,w,9,3,"ng-container",11),e.BQk()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t)}}function S(n,o){if(1&n&&(e.ynx(0),e.YNc(1,A,2,1,"ng-container",11),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.loadedSpreadsheet$))}}function F(n,o){if(1&n&&(e.ynx(0),e.YNc(1,T,2,1,"ng-container",11),e.ALo(2,"async"),e.YNc(3,S,3,3,"ng-container",7),e.BQk()),2&n){const t=e.oxw(),c=e.MAs(17);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,t.isLoading$)),e.xp6(2),e.Q6J("ngIf",!t.error)("ngIfElse",c)}}function k(n,o){1&n&&(e.TgZ(0,"app-ball-guy-bubble")(1,"div"),e._uU(2,"Enter a spreadsheet ID to load a spreadsheet."),e.qZA(),e.TgZ(3,"div"),e._uU(4,"Make sure the spreadsheet with that given ID is published to web and made from the template!"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Currently no other spreadsheet template it supported."),e.qZA()())}function U(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.hij("Error: ",null==t.error?null:t.error.message,"")}}class d{constructor(o){this.spreadsheetFacade=o,this.classes="view spreadsheet-changer-view",this.hasRequested=!1,this.apiKey=f.N.googleApiKey,this.error=null,this.searchForm=new i.cw({search:new i.NI("",{nonNullable:!0})}),this.isLoading$=this.spreadsheetFacade.isLoading$().pipe((0,_.b)(t=>console.log("lods",t))),this.spreadsheetHistory$=this.spreadsheetFacade.getSpreadsheetHistory$()}submitSearch(){this.hasRequested=!0,this.error=null,this.loadedSpreadsheet$=this.spreadsheetFacade.searchSpreadsheet(this.searchForm.controls.search.value,this.apiKey).pipe((0,m.K)((o,t)=>(console.log("ge",o),this.error=o,t)))}saveSpreadsheet(o){this.spreadsheetFacade.updateCurrentSpreadsheet(o)}fromHistory(o){this.hasRequested=!0,this.loadedSpreadsheet$=this.spreadsheetFacade.loadSpreadsheet(o,this.apiKey)}trackBy(o,t){return t.id}}d.\u0275fac=function(o){return new(o||d)(e.Y36(x.s))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-index"]],hostVars:2,hostBindings:function(o,t){2&o&&e.Tol(t.classes)},decls:18,vars:7,consts:[[1,"view-header","full-width"],[1,"view-sidebar"],[1,"view-subheader"],[3,"formGroup","submit"],["id","search","formControlName","search","placeholder","Look up spreadsheet by id"],["class","history-entry",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"view-content"],[4,"ngIf","ngIfElse"],["notRequestedYet",""],["errorTemplate",""],[1,"history-entry",3,"click"],[4,"ngIf"],[1,"centered-spinner"],[1,"t-align-center"],[1,""],["class","collection-infos",4,"ngIf"],[1,"button-row"],[1,"save-button",3,"click"],[1,"collection-infos"],[1,"title"],[1,"text"]],template:function(o,t){if(1&o&&(e.TgZ(0,"header",0),e._uU(1,"Change spreadsheet"),e.qZA(),e.TgZ(2,"aside",1)(3,"div",2),e._uU(4,"Spreadsheet search"),e.qZA(),e.TgZ(5,"form",3),e.NdJ("submit",function(){return t.submitSearch()}),e._UZ(6,"input",4),e.qZA(),e.TgZ(7,"div",2),e._uU(8," search history "),e.qZA(),e.TgZ(9,"ul"),e.YNc(10,Z,2,1,"li",5),e.ALo(11,"async"),e.qZA()(),e.TgZ(12,"div",6),e.YNc(13,F,4,5,"ng-container",7),e.qZA(),e.YNc(14,k,7,0,"ng-template",null,8,e.W1O),e.YNc(16,U,1,1,"ng-template",null,9,e.W1O)),2&o){const c=e.MAs(15);e.xp6(5),e.Q6J("formGroup",t.searchForm),e.xp6(5),e.Q6J("ngForOf",e.lcZ(11,5,t.spreadsheetHistory$))("ngForTrackBy",t.trackBy),e.xp6(3),e.Q6J("ngIf",t.loadedSpreadsheet$)("ngIfElse",c)}},dependencies:[l.sg,l.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,v.U,y.O,l.Ov],styles:["#search,.history-entry,.save-button{font-size:90%;font-weight:500;line-height:32px;color:#000;border-radius:42px;box-shadow:0 3px 5px #0006;align-items:center;width:100%;overflow:hidden;border:none;outline:none;padding:0 8px;background:#fff}.history-entry{cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:16px}.save-button{cursor:pointer;width:auto}.spreadsheet-changer-view .centered-spinner{margin:20px auto}.collection-infos{margin-top:16px}.collection-infos .title{font-size:18px}.collection-infos .text{margin:0 0 8px;line-height:1.4;color:#000000e6}@media (prefers-color-scheme: dark){#search,.history-entry,.save-button{background:#21262d;color:#efe2e3}.collection-infos .title{color:#efe2e3}.collection-infos .text{color:#ffffffb3}}@media screen and (max-width: 720px){.spreadsheet-changer-view .view-sidebar{order:2}}\n"],encapsulation:2});const B=[{path:"",component:d}];class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.Bz.forChild(B),g.Bz]});var J=r(4466);class a{}a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[l.ez,s,i.UX,J.m]})}}]);