import{E as O,F as Q,d as H,g as D,h as G,i as j,k as L,l as R,n as q,o as K,p as P,x as A,y as z,z as J}from"./chunk-I7FIH5PJ.js";import{$a as f,B as S,Fa as F,Ga as u,La as m,Lb as N,Nb as M,P as E,Pa as k,Sa as T,T as h,Va as p,W as I,Xa as B,Ya as V,Z as v,Za as n,_ as y,_a as a,ab as b,bc as w,cb as _,db as c,ob as s,pb as $,qb as g,va as d,wb as x,xb as C}from"./chunk-IOIAQSLZ.js";function Y(e,t){if(e&1){let i=b();n(0,"li",7),_("click",function(){let r=v(i).$implicit,l=c();return y(l.fromHistory(r.id))}),s(1),a()}if(e&2){let i=t.$implicit;d(),g(" ",i.title," ")}}function Z(e,t){e&1&&(n(0,"div"),f(1,"app-spinner",8),n(2,"div",9),s(3,"Load spreadsheet"),a()())}function ee(e,t){if(e&1&&m(0,Z,4,0,"div"),e&2){let i=c(2);p(i.hasRequested?0:-1)}}function te(e,t){e&1&&(n(0,"div",11)(1,"div",14),s(2,"Contains valuables!"),a(),n(3,"div",15),s(4,"Valuables are Pok\xE9mon with a certain rarity. Event, shiny, competitive, legendary Pok\xE9mon and others. "),a()())}function ie(e,t){e&1&&(n(0,"div",11)(1,"div",14),s(2,"Contains breedables!"),a(),n(3,"div",15),s(4,"Breedables are Pok\xE9mon, which can be bred or are a result of breeding. They are usually collected in different kind of balls like Bulbasaur in a Friend Ball. "),a()())}function ne(e,t){if(e&1){let i=b();n(0,"div",2),s(1),a(),f(2,"div",10),m(3,te,5,0,"div",11)(4,ie,5,0,"div",11),n(5,"div",12)(6,"button",13),_("click",function(){v(i);let r=c(),l=c(3);return y(l.saveSpreadsheet(r))}),s(7,"Save as current spreadsheet "),a()()}if(e&2){let i=c();d(),$(i.title),d(2),p(i.hasValuables?3:-1),d(),p(i.hasBreedables?4:-1)}}function oe(e,t){e&1&&m(0,ne,8,3),e&2&&p(t?0:-1)}function re(e,t){if(e&1&&(m(0,oe,1,1),x(1,"async")),e&2){let i,o=c(2);p((i=C(1,1,o.loadedSpreadsheet$))?0:-1,i)}}function ae(e,t){if(e&1&&s(0),e&2){let i=c(2);g(" Error: ",i.error==null?null:i.error.message," ")}}function se(e,t){if(e&1&&(m(0,ee,1,1),x(1,"async"),m(2,re,2,3)(3,ae,1,1)),e&2){let i=c();p(C(1,2,i.isLoading$)?0:-1),d(2),p(i.error?3:2)}}function le(e,t){e&1&&(n(0,"app-ball-guy-bubble")(1,"div"),s(2,"Enter a spreadsheet ID to load a spreadsheet."),a(),n(3,"div"),s(4,"Make sure the spreadsheet with that given ID is published to web and made from the template!"),a(),n(5,"div"),s(6,"Currently no other spreadsheet template it supported."),a()())}var W=(()=>{let t=class t{constructor(){this.spreadsheetFacade=I(z),this.classes="view spreadsheet-changer-view",this.hasRequested=!1,this.apiKey=A.googleApiKey,this.error=null,this.searchForm=new j({search:new L("",{nonNullable:!0})}),this.isLoading$=this.spreadsheetFacade.isLoading$().pipe(E(o=>console.log("lods",o))),this.spreadsheetHistory$=this.spreadsheetFacade.getSpreadsheetHistory$()}submitSearch(){this.hasRequested=!0,this.error=null,this.loadedSpreadsheet$=this.spreadsheetFacade.searchSpreadsheet(this.searchForm.controls.search.value,this.apiKey).pipe(S((o,r)=>(console.log("ge",o),this.error=o,r)))}saveSpreadsheet(o){this.spreadsheetFacade.updateCurrentSpreadsheet(o)}fromHistory(o){this.hasRequested=!0,this.loadedSpreadsheet$=this.spreadsheetFacade.loadSpreadsheet(o,this.apiKey)}trackBy(o,r){return r.id}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=F({type:t,selectors:[["app-index"]],hostVars:2,hostBindings:function(r,l){r&2&&T(l.classes)},standalone:!1,decls:16,vars:4,consts:[[1,"view-header","full-width"],[1,"view-sidebar"],[1,"view-subheader"],[3,"submit","formGroup"],["formControlName","search","id","search","placeholder","Look up spreadsheet by id"],[1,"history-entry"],[1,"view-content"],[1,"history-entry",3,"click"],[1,"centered-spinner"],[1,"t-align-center"],[1,""],[1,"collection-infos"],[1,"button-row"],[1,"save-button",3,"click"],[1,"title"],[1,"text"]],template:function(r,l){r&1&&(n(0,"header",0),s(1,"Change spreadsheet"),a(),n(2,"aside",1)(3,"div",2),s(4,"Spreadsheet search"),a(),n(5,"form",3),_("submit",function(){return l.submitSearch()}),f(6,"input",4),a(),n(7,"div",2),s(8," search history "),a(),n(9,"ul"),B(10,Y,2,1,"li",5,l.trackBy,!0),x(12,"async"),a()(),n(13,"div",6),m(14,se,4,4)(15,le,7,0,"app-ball-guy-bubble"),a()),r&2&&(d(5),k("formGroup",l.searchForm),d(5),V(C(12,2,l.spreadsheetHistory$)),d(4),p(l.loadedSpreadsheet$?14:15))},dependencies:[R,H,D,G,q,K,J,O,N],styles:[`#search,.history-entry,.save-button{font-size:90%;font-weight:500;line-height:32px;color:#000;border-radius:42px;box-shadow:0 3px 5px #0006;align-items:center;width:100%;overflow:hidden;border:none;outline:none;padding:0 8px;background:#fff}.history-entry{cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:16px}.save-button{cursor:pointer;width:auto}.spreadsheet-changer-view .centered-spinner{margin:20px auto}.collection-infos{margin-top:16px}.collection-infos .title{font-size:18px}.collection-infos .text{margin:0 0 8px;line-height:1.4;color:#000000e6}@media (prefers-color-scheme: dark){#search,.history-entry,.save-button{background:#21262d;color:#efe2e3}.collection-infos .title{color:#efe2e3}.collection-infos .text{color:#ffffffb3}}@media screen and (max-width: 720px){.spreadsheet-changer-view .view-sidebar{order:2}}
`],encapsulation:2});let e=t;return e})();var de=[{path:"",component:W}],X=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u({type:t}),t.\u0275inj=h({imports:[w.forChild(de),w]});let e=t;return e})();var Me=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u({type:t}),t.\u0275inj=h({imports:[M,X,P,Q]});let e=t;return e})();export{Me as SpreadsheetChangerModule};
