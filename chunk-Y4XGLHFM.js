import{a as B}from"./chunk-IY7GAQYF.js";import{a as O}from"./chunk-27AAT5OZ.js";import{b as $}from"./chunk-QHPVHMEK.js";import{b as R,f as N,g as D,h as H,j as q,k as L,n as P,o as A}from"./chunk-FZ3CAX4E.js";import"./chunk-DO3CXYHA.js";import"./chunk-KQ2OKJYU.js";import{$a as c,Aa as S,Bb as w,Fc as g,Hb as p,Jb as E,Kb as I,Lb as n,Mb as o,Nb as f,Ob as x,Qb as C,Rb as d,ac as a,ba as b,bc as T,cc as v,gc as V,hc as k,ia as u,ic as F,ja as _,nc as M,ob as y,ub as h}from"./chunk-FUYFRARX.js";import"./chunk-ESJYUATY.js";var W=()=>({name:"search",updateOn:"submit"}),z=(e,t)=>t.id;function G(e,t){if(e&1){let i=x();n(0,"li",6),C("click",function(){let s=u(i).$implicit,l=d();return _(l.fromHistory(s.id))}),a(1),o()}if(e&2){let i=t.$implicit;c(),v(" ",i.title," ")}}function j(e,t){e&1&&(n(0,"div"),f(1,"app-spinner",7),n(2,"div",8),a(3,"Load spreadsheet"),o()())}function J(e,t){if(e&1&&h(0,j,4,0,"div"),e&2){let i=d(2);p(i.hasRequested?0:-1)}}function K(e,t){e&1&&(n(0,"div",10)(1,"div",13),a(2,"Contains valuables!"),o(),n(3,"div",14),a(4,"Valuables are Pok\xE9mon with a certain rarity. Event, shiny, competitive, legendary Pok\xE9mon and others. "),o()())}function Q(e,t){e&1&&(n(0,"div",10)(1,"div",13),a(2,"Contains breedables!"),o(),n(3,"div",14),a(4,"Breedables are Pok\xE9mon, which can be bred or are a result of breeding. They are usually collected in different kind of balls like Bulbasaur in a Friend Ball. "),o()())}function U(e,t){if(e&1){let i=x();n(0,"div",2),a(1),o(),f(2,"div",9),h(3,K,5,0,"div",10)(4,Q,5,0,"div",10),n(5,"div",11)(6,"button",12),C("click",function(){u(i);let s=d(),l=d(3);return _(l.saveSpreadsheet(s))}),a(7,"Save as current spreadsheet "),o()()}if(e&2){let i=d();c(),T(i.title),c(2),p(i.hasValuables?3:-1),c(),p(i.hasBreedables?4:-1)}}function X(e,t){e&1&&h(0,U,8,3),e&2&&p(t?0:-1)}function Y(e,t){if(e&1&&h(0,X,1,1),e&2){let i,r=d(2);p((i=r.loadedSpreadsheet$.value())?0:-1,i)}}function Z(e,t){if(e&1&&a(0),e&2){let i=d(2);v(" Error: ",i.error==null?null:i.error.message," ")}}function ee(e,t){if(e&1&&h(0,J,1,1)(1,Y,1,1)(2,Z,1,1),e&2){let i=d();p(i.loadedSpreadsheet$.isLoading()||!i.loadedSpreadsheet$.status()?0:i.loadedSpreadsheet$.hasValue()?1:2)}}function te(e,t){e&1&&(n(0,"app-ball-guy-bubble")(1,"div"),a(2,"Enter a spreadsheet ID to load a spreadsheet."),o(),n(3,"div"),a(4,"Make sure the spreadsheet with that given ID is published to web and made from the template!"),o(),n(5,"div"),a(6,"Currently no other spreadsheet template it supported."),o()())}var he=(()=>{let t=class t{constructor(){this.spreadsheetFacade=b($),this.searchValue=S(""),this.hasRequested=!1,this.loadedSpreadsheet$=this.spreadsheetFacade.searchResult,this.spreadsheetHistory$=this.spreadsheetFacade.getSpreadsheetHistory$(),this.error=null,g(()=>{let r=this.spreadsheetFacade.searchResult.error();r&&(this.error=this.spreadsheetFacade.convertApiErrors(r.status))}),g(()=>{this.searchValue().length&&this.submitSearch(this.searchValue)})}submitSearch(r){this.hasRequested=!0,this.spreadsheetFacade.currentSearchTerm.set(r())}saveSpreadsheet(r){this.spreadsheetFacade.updateCurrentSpreadsheet(r)}fromHistory(r){this.hasRequested=!0,this.spreadsheetFacade.currentSearchTerm.set(r)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=y({type:t,selectors:[["app-index"]],hostAttrs:[1,"view","spreadsheet-changer-view"],decls:15,vars:4,consts:[[1,"view-header","full-width"],[1,"view-sidebar"],[1,"view-subheader"],["id","search","placeholder","Look up spreadsheet by id",3,"ngModelChange","ngModel","ngModelOptions"],[1,"history-entry"],[1,"view-content"],[1,"history-entry",3,"click"],[1,"centered-spinner"],[1,"t-align-center"],[1,""],[1,"collection-infos"],[1,"button-row"],[1,"save-button",3,"click"],[1,"title"],[1,"text"]],template:function(s,l){s&1&&(n(0,"header",0),a(1,"Change spreadsheet"),o(),n(2,"aside",1)(3,"div",2),a(4,"Spreadsheet search"),o(),n(5,"form")(6,"input",3),F("ngModelChange",function(m){return k(l.searchValue,m)||(l.searchValue=m),m}),o()(),n(7,"div",2),a(8," search history "),o(),n(9,"ul"),E(10,G,2,1,"li",4,z),o()(),n(12,"div",5),h(13,ee,3,1)(14,te,7,0,"app-ball-guy-bubble"),o()),s&2&&(c(6),V("ngModel",l.searchValue),w("ngModelOptions",M(3,W)),c(4),I(l.spreadsheetHistory$()),c(3),p(l.loadedSpreadsheet$?13:14))},dependencies:[A,L,R,N,D,B,O,P,q,H],styles:[`#search,.history-entry,.save-button{font-size:90%;font-weight:500;line-height:32px;color:#000;border-radius:42px;box-shadow:0 3px 5px #0006;align-items:center;width:100%;overflow:hidden;border:none;outline:none;padding:0 8px;background:#fff}.history-entry{cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:16px}.save-button{cursor:pointer;width:auto}.spreadsheet-changer-view .centered-spinner{margin:20px auto}.collection-infos{margin-top:16px}.collection-infos .title{font-size:18px}.collection-infos .text{margin:0 0 8px;line-height:1.4;color:#000000e6}@media (prefers-color-scheme: dark){#search,.history-entry,.save-button{background:#21262d;color:#efe2e3}.collection-infos .title{color:#efe2e3}.collection-infos .text{color:#ffffffb3}}@media screen and (max-width: 720px){.spreadsheet-changer-view .view-sidebar{order:2}}
`],encapsulation:2});let e=t;return e})();export{he as IndexComponent};
